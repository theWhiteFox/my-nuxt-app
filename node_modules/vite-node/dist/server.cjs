'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var pathe = require('pathe');
var fs = require('fs');
var mlly = require('mlly');
var utils = require('./utils.cjs');
require('url');

const ESM_EXT_RE = /\.(es|esm|esm-browser|esm-bundler|es6|module)\.js$/;
const ESM_FOLDER_RE = /\/esm\/(.*\.js)$/;
const defaultInline = [
  /virtual:/,
  /\.ts$/,
  ESM_EXT_RE,
  ESM_FOLDER_RE
];
const depsExternal = [
  /\.cjs\.js$/,
  /\.mjs$/
];
function guessCJSversion(id) {
  if (id.match(ESM_EXT_RE)) {
    for (const i of [
      id.replace(ESM_EXT_RE, ".mjs"),
      id.replace(ESM_EXT_RE, ".umd.js"),
      id.replace(ESM_EXT_RE, ".cjs.js"),
      id.replace(ESM_EXT_RE, ".js")
    ]) {
      if (fs.existsSync(i))
        return i;
    }
  }
  if (id.match(ESM_FOLDER_RE)) {
    for (const i of [
      id.replace(ESM_FOLDER_RE, "/umd/$1"),
      id.replace(ESM_FOLDER_RE, "/cjs/$1"),
      id.replace(ESM_FOLDER_RE, "/$1")
    ]) {
      if (fs.existsSync(i))
        return i;
    }
  }
}
async function shouldExternalize(id, options, cache = /* @__PURE__ */ new Map()) {
  if (!cache.has(id))
    cache.set(id, _shouldExternalize(id, options));
  return cache.get(id);
}
async function _shouldExternalize(id, options) {
  if (mlly.isNodeBuiltin(id))
    return id;
  if (id.startsWith("data:"))
    return id;
  id = patchWindowsImportPath(id);
  if (matchExternalizePattern(id, options == null ? void 0 : options.inline))
    return false;
  if (matchExternalizePattern(id, options == null ? void 0 : options.external))
    return id;
  const isNodeModule = id.includes("/node_modules/");
  const guessCJS = isNodeModule && (options == null ? void 0 : options.fallbackCJS);
  id = guessCJS ? guessCJSversion(id) || id : id;
  if (matchExternalizePattern(id, defaultInline))
    return false;
  if (matchExternalizePattern(id, depsExternal))
    return id;
  const isDist = id.includes("/dist/");
  if ((isNodeModule || isDist) && await mlly.isValidNodeImport(id))
    return id;
  return false;
}
function matchExternalizePattern(id, patterns) {
  if (!patterns)
    return false;
  for (const ex of patterns) {
    if (typeof ex === "string") {
      if (id.includes(`/node_modules/${ex}/`))
        return true;
    } else {
      if (ex.test(id))
        return true;
    }
  }
  return false;
}
function patchWindowsImportPath(path) {
  if (path.match(/^\w:\\/))
    return `file:///${utils.slash(path)}`;
  else if (path.match(/^\w:\//))
    return `file:///${path}`;
  else
    return path;
}

var __defProp = Object.defineProperty;
var __defProps = Object.defineProperties;
var __getOwnPropDescs = Object.getOwnPropertyDescriptors;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));
const RealDate = Date;
class ViteNodeServer {
  constructor(server, options = {}) {
    this.server = server;
    this.options = options;
    this.fetchPromiseMap = /* @__PURE__ */ new Map();
    this.transformPromiseMap = /* @__PURE__ */ new Map();
    this.fetchCache = /* @__PURE__ */ new Map();
  }
  shouldExternalize(id) {
    return shouldExternalize(id, this.options.deps);
  }
  async resolveId(id, importer) {
    if (importer && !importer.startsWith(this.server.config.root))
      importer = pathe.join(this.server.config.root, importer);
    return this.server.pluginContainer.resolveId(id, importer, { ssr: true });
  }
  async fetchModule(id) {
    if (!this.fetchPromiseMap.has(id)) {
      this.fetchPromiseMap.set(id, this._fetchModule(id).then((r) => {
        return this.options.sourcemap !== true ? __spreadProps(__spreadValues({}, r), { map: void 0 }) : r;
      }).finally(() => {
        this.fetchPromiseMap.delete(id);
      }));
    }
    return this.fetchPromiseMap.get(id);
  }
  async transformRequest(id) {
    if (!this.transformPromiseMap.has(id)) {
      this.transformPromiseMap.set(id, this._transformRequest(id).finally(() => {
        this.transformPromiseMap.delete(id);
      }));
    }
    return this.transformPromiseMap.get(id);
  }
  getTransformMode(id) {
    var _a, _b, _c, _d;
    const withoutQuery = id.split("?")[0];
    if ((_b = (_a = this.options.transformMode) == null ? void 0 : _a.web) == null ? void 0 : _b.some((r) => withoutQuery.match(r)))
      return "web";
    if ((_d = (_c = this.options.transformMode) == null ? void 0 : _c.ssr) == null ? void 0 : _d.some((r) => withoutQuery.match(r)))
      return "ssr";
    if (withoutQuery.match(/\.([cm]?[jt]sx?|json)$/))
      return "ssr";
    return "web";
  }
  async _fetchModule(id) {
    let result;
    const filePath = utils.toFilePath(id, this.server.config.root);
    const module = this.server.moduleGraph.getModuleById(id);
    const timestamp = (module == null ? void 0 : module.lastHMRTimestamp) || RealDate.now();
    const cache = this.fetchCache.get(filePath);
    if (timestamp && cache && cache.timestamp >= timestamp)
      return cache.result;
    const externalize = await this.shouldExternalize(filePath);
    if (externalize) {
      result = { externalize };
    } else {
      const r = await this._transformRequest(id);
      result = { code: r == null ? void 0 : r.code, map: r == null ? void 0 : r.map };
    }
    this.fetchCache.set(filePath, {
      timestamp,
      result
    });
    return result;
  }
  async _transformRequest(id) {
    let result = null;
    if (this.getTransformMode(id) === "web") {
      result = await this.server.transformRequest(id);
      if (result)
        result = await this.server.ssrTransform(result.code, result.map, id);
    } else {
      result = await this.server.transformRequest(id, { ssr: true });
    }
    const sourcemap = this.options.sourcemap ?? "inline";
    if (sourcemap === "inline" && result && !id.includes("node_modules"))
      utils.withInlineSourcemap(result);
    return result;
  }
}

exports.ViteNodeServer = ViteNodeServer;
exports.guessCJSversion = guessCJSversion;
exports.shouldExternalize = shouldExternalize;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VydmVyLmNqcyIsInNvdXJjZXMiOlsiLi4vc3JjL2V4dGVybmFsaXplLnRzIiwiLi4vc3JjL3NlcnZlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBleGlzdHNTeW5jIH0gZnJvbSAnZnMnXG5pbXBvcnQgeyBpc05vZGVCdWlsdGluLCBpc1ZhbGlkTm9kZUltcG9ydCB9IGZyb20gJ21sbHknXG5pbXBvcnQgdHlwZSB7IERlcHNIYW5kbGluZ09wdGlvbnMgfSBmcm9tICcuL3R5cGVzJ1xuaW1wb3J0IHsgc2xhc2ggfSBmcm9tICcuL3V0aWxzJ1xuXG5jb25zdCBFU01fRVhUX1JFID0gL1xcLihlc3xlc218ZXNtLWJyb3dzZXJ8ZXNtLWJ1bmRsZXJ8ZXM2fG1vZHVsZSlcXC5qcyQvXG5jb25zdCBFU01fRk9MREVSX1JFID0gL1xcL2VzbVxcLyguKlxcLmpzKSQvXG5cbmNvbnN0IGRlZmF1bHRJbmxpbmUgPSBbXG4gIC92aXJ0dWFsOi8sXG4gIC9cXC50cyQvLFxuICBFU01fRVhUX1JFLFxuICBFU01fRk9MREVSX1JFLFxuXVxuXG5jb25zdCBkZXBzRXh0ZXJuYWwgPSBbXG4gIC9cXC5janNcXC5qcyQvLFxuICAvXFwubWpzJC8sXG5dXG5cbmV4cG9ydCBmdW5jdGlvbiBndWVzc0NKU3ZlcnNpb24oaWQ6IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gIGlmIChpZC5tYXRjaChFU01fRVhUX1JFKSkge1xuICAgIGZvciAoY29uc3QgaSBvZiBbXG4gICAgICBpZC5yZXBsYWNlKEVTTV9FWFRfUkUsICcubWpzJyksXG4gICAgICBpZC5yZXBsYWNlKEVTTV9FWFRfUkUsICcudW1kLmpzJyksXG4gICAgICBpZC5yZXBsYWNlKEVTTV9FWFRfUkUsICcuY2pzLmpzJyksXG4gICAgICBpZC5yZXBsYWNlKEVTTV9FWFRfUkUsICcuanMnKSxcbiAgICBdKSB7XG4gICAgICBpZiAoZXhpc3RzU3luYyhpKSlcbiAgICAgICAgcmV0dXJuIGlcbiAgICB9XG4gIH1cbiAgaWYgKGlkLm1hdGNoKEVTTV9GT0xERVJfUkUpKSB7XG4gICAgZm9yIChjb25zdCBpIG9mIFtcbiAgICAgIGlkLnJlcGxhY2UoRVNNX0ZPTERFUl9SRSwgJy91bWQvJDEnKSxcbiAgICAgIGlkLnJlcGxhY2UoRVNNX0ZPTERFUl9SRSwgJy9janMvJDEnKSxcbiAgICAgIGlkLnJlcGxhY2UoRVNNX0ZPTERFUl9SRSwgJy8kMScpLFxuICAgIF0pIHtcbiAgICAgIGlmIChleGlzdHNTeW5jKGkpKVxuICAgICAgICByZXR1cm4gaVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2hvdWxkRXh0ZXJuYWxpemUoXG4gIGlkOiBzdHJpbmcsXG4gIG9wdGlvbnM/OiBEZXBzSGFuZGxpbmdPcHRpb25zLFxuICBjYWNoZSA9IG5ldyBNYXA8c3RyaW5nLCBQcm9taXNlPHN0cmluZyB8IGZhbHNlPj4oKSxcbikge1xuICBpZiAoIWNhY2hlLmhhcyhpZCkpXG4gICAgY2FjaGUuc2V0KGlkLCBfc2hvdWxkRXh0ZXJuYWxpemUoaWQsIG9wdGlvbnMpKVxuICByZXR1cm4gY2FjaGUuZ2V0KGlkKSFcbn1cblxuYXN5bmMgZnVuY3Rpb24gX3Nob3VsZEV4dGVybmFsaXplKFxuICBpZDogc3RyaW5nLFxuICBvcHRpb25zPzogRGVwc0hhbmRsaW5nT3B0aW9ucyxcbik6IFByb21pc2U8c3RyaW5nIHwgZmFsc2U+IHtcbiAgaWYgKGlzTm9kZUJ1aWx0aW4oaWQpKVxuICAgIHJldHVybiBpZFxuXG4gIC8vIGRhdGE6IHNob3VsZCBiZSBwcm9jZXNzZWQgYnkgbmF0aXZlIGltcG9ydCxcbiAgLy8gc2luY2UgaXQgaXMgYSBmZWF0dXJlIG9mIEVTTVxuICBpZiAoaWQuc3RhcnRzV2l0aCgnZGF0YTonKSlcbiAgICByZXR1cm4gaWRcblxuICBpZCA9IHBhdGNoV2luZG93c0ltcG9ydFBhdGgoaWQpXG5cbiAgaWYgKG1hdGNoRXh0ZXJuYWxpemVQYXR0ZXJuKGlkLCBvcHRpb25zPy5pbmxpbmUpKVxuICAgIHJldHVybiBmYWxzZVxuICBpZiAobWF0Y2hFeHRlcm5hbGl6ZVBhdHRlcm4oaWQsIG9wdGlvbnM/LmV4dGVybmFsKSlcbiAgICByZXR1cm4gaWRcblxuICBjb25zdCBpc05vZGVNb2R1bGUgPSBpZC5pbmNsdWRlcygnL25vZGVfbW9kdWxlcy8nKVxuICBjb25zdCBndWVzc0NKUyA9IGlzTm9kZU1vZHVsZSAmJiBvcHRpb25zPy5mYWxsYmFja0NKU1xuICBpZCA9IGd1ZXNzQ0pTID8gZ3Vlc3NDSlN2ZXJzaW9uKGlkKSB8fCBpZCA6IGlkXG5cbiAgaWYgKG1hdGNoRXh0ZXJuYWxpemVQYXR0ZXJuKGlkLCBkZWZhdWx0SW5saW5lKSlcbiAgICByZXR1cm4gZmFsc2VcbiAgaWYgKG1hdGNoRXh0ZXJuYWxpemVQYXR0ZXJuKGlkLCBkZXBzRXh0ZXJuYWwpKVxuICAgIHJldHVybiBpZFxuXG4gIGNvbnN0IGlzRGlzdCA9IGlkLmluY2x1ZGVzKCcvZGlzdC8nKVxuICBpZiAoKGlzTm9kZU1vZHVsZSB8fCBpc0Rpc3QpICYmIGF3YWl0IGlzVmFsaWROb2RlSW1wb3J0KGlkKSlcbiAgICByZXR1cm4gaWRcblxuICByZXR1cm4gZmFsc2Vcbn1cblxuZnVuY3Rpb24gbWF0Y2hFeHRlcm5hbGl6ZVBhdHRlcm4oaWQ6IHN0cmluZywgcGF0dGVybnM/OiAoc3RyaW5nIHwgUmVnRXhwKVtdKSB7XG4gIGlmICghcGF0dGVybnMpXG4gICAgcmV0dXJuIGZhbHNlXG4gIGZvciAoY29uc3QgZXggb2YgcGF0dGVybnMpIHtcbiAgICBpZiAodHlwZW9mIGV4ID09PSAnc3RyaW5nJykge1xuICAgICAgaWYgKGlkLmluY2x1ZGVzKGAvbm9kZV9tb2R1bGVzLyR7ZXh9L2ApKVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGlmIChleC50ZXN0KGlkKSlcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlXG59XG5cbmZ1bmN0aW9uIHBhdGNoV2luZG93c0ltcG9ydFBhdGgocGF0aDogc3RyaW5nKSB7XG4gIGlmIChwYXRoLm1hdGNoKC9eXFx3OlxcXFwvKSlcbiAgICByZXR1cm4gYGZpbGU6Ly8vJHtzbGFzaChwYXRoKX1gXG4gIGVsc2UgaWYgKHBhdGgubWF0Y2goL15cXHc6XFwvLykpXG4gICAgcmV0dXJuIGBmaWxlOi8vLyR7cGF0aH1gXG4gIGVsc2VcbiAgICByZXR1cm4gcGF0aFxufVxuIiwiaW1wb3J0IHsgam9pbiB9IGZyb20gJ3BhdGhlJ1xuaW1wb3J0IHR5cGUgeyBUcmFuc2Zvcm1SZXN1bHQsIFZpdGVEZXZTZXJ2ZXIgfSBmcm9tICd2aXRlJ1xuaW1wb3J0IHR5cGUgeyBGZXRjaFJlc3VsdCwgUmF3U291cmNlTWFwLCBWaXRlTm9kZVJlc29sdmVJZCwgVml0ZU5vZGVTZXJ2ZXJPcHRpb25zIH0gZnJvbSAnLi90eXBlcydcbmltcG9ydCB7IHNob3VsZEV4dGVybmFsaXplIH0gZnJvbSAnLi9leHRlcm5hbGl6ZSdcbmltcG9ydCB7IHRvRmlsZVBhdGgsIHdpdGhJbmxpbmVTb3VyY2VtYXAgfSBmcm9tICcuL3V0aWxzJ1xuXG5leHBvcnQgKiBmcm9tICcuL2V4dGVybmFsaXplJ1xuXG4vLyBzdG9yZSB0aGUgb3JpZ2luYWwgcmVmZXJlbmNlIHRvIGF2b2lkIGl0IGJlZW4gbW9ja2VkXG5jb25zdCBSZWFsRGF0ZSA9IERhdGVcblxuZXhwb3J0IGNsYXNzIFZpdGVOb2RlU2VydmVyIHtcbiAgcHJpdmF0ZSBmZXRjaFByb21pc2VNYXAgPSBuZXcgTWFwPHN0cmluZywgUHJvbWlzZTxGZXRjaFJlc3VsdD4+KClcbiAgcHJpdmF0ZSB0cmFuc2Zvcm1Qcm9taXNlTWFwID0gbmV3IE1hcDxzdHJpbmcsIFByb21pc2U8VHJhbnNmb3JtUmVzdWx0IHwgbnVsbCB8IHVuZGVmaW5lZD4+KClcblxuICBmZXRjaENhY2hlID0gbmV3IE1hcDxzdHJpbmcsIHtcbiAgICB0aW1lc3RhbXA6IG51bWJlclxuICAgIHJlc3VsdDogRmV0Y2hSZXN1bHRcbiAgfT4oKVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBzZXJ2ZXI6IFZpdGVEZXZTZXJ2ZXIsXG4gICAgcHVibGljIG9wdGlvbnM6IFZpdGVOb2RlU2VydmVyT3B0aW9ucyA9IHt9LFxuICApIHt9XG5cbiAgc2hvdWxkRXh0ZXJuYWxpemUoaWQ6IHN0cmluZykge1xuICAgIHJldHVybiBzaG91bGRFeHRlcm5hbGl6ZShpZCwgdGhpcy5vcHRpb25zLmRlcHMpXG4gIH1cblxuICBhc3luYyByZXNvbHZlSWQoaWQ6IHN0cmluZywgaW1wb3J0ZXI/OiBzdHJpbmcpOiBQcm9taXNlPFZpdGVOb2RlUmVzb2x2ZUlkIHwgbnVsbD4ge1xuICAgIGlmIChpbXBvcnRlciAmJiAhaW1wb3J0ZXIuc3RhcnRzV2l0aCh0aGlzLnNlcnZlci5jb25maWcucm9vdCkpXG4gICAgICBpbXBvcnRlciA9IGpvaW4odGhpcy5zZXJ2ZXIuY29uZmlnLnJvb3QsIGltcG9ydGVyKVxuICAgIHJldHVybiB0aGlzLnNlcnZlci5wbHVnaW5Db250YWluZXIucmVzb2x2ZUlkKGlkLCBpbXBvcnRlciwgeyBzc3I6IHRydWUgfSlcbiAgfVxuXG4gIGFzeW5jIGZldGNoTW9kdWxlKGlkOiBzdHJpbmcpOiBQcm9taXNlPEZldGNoUmVzdWx0PiB7XG4gICAgLy8gcmV1c2UgdHJhbnNmb3JtIGZvciBjb25jdXJyZW50IHJlcXVlc3RzXG4gICAgaWYgKCF0aGlzLmZldGNoUHJvbWlzZU1hcC5oYXMoaWQpKSB7XG4gICAgICB0aGlzLmZldGNoUHJvbWlzZU1hcC5zZXQoaWQsXG4gICAgICAgIHRoaXMuX2ZldGNoTW9kdWxlKGlkKVxuICAgICAgICAgIC50aGVuKChyKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnNvdXJjZW1hcCAhPT0gdHJ1ZSA/IHsgLi4uciwgbWFwOiB1bmRlZmluZWQgfSA6IHJcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZmV0Y2hQcm9taXNlTWFwLmRlbGV0ZShpZClcbiAgICAgICAgICB9KSxcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hQcm9taXNlTWFwLmdldChpZCkhXG4gIH1cblxuICBhc3luYyB0cmFuc2Zvcm1SZXF1ZXN0KGlkOiBzdHJpbmcpIHtcbiAgICAvLyByZXVzZSB0cmFuc2Zvcm0gZm9yIGNvbmN1cnJlbnQgcmVxdWVzdHNcbiAgICBpZiAoIXRoaXMudHJhbnNmb3JtUHJvbWlzZU1hcC5oYXMoaWQpKSB7XG4gICAgICB0aGlzLnRyYW5zZm9ybVByb21pc2VNYXAuc2V0KGlkLFxuICAgICAgICB0aGlzLl90cmFuc2Zvcm1SZXF1ZXN0KGlkKVxuICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtUHJvbWlzZU1hcC5kZWxldGUoaWQpXG4gICAgICAgICAgfSksXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybVByb21pc2VNYXAuZ2V0KGlkKSFcbiAgfVxuXG4gIGdldFRyYW5zZm9ybU1vZGUoaWQ6IHN0cmluZykge1xuICAgIGNvbnN0IHdpdGhvdXRRdWVyeSA9IGlkLnNwbGl0KCc/JylbMF1cblxuICAgIGlmICh0aGlzLm9wdGlvbnMudHJhbnNmb3JtTW9kZT8ud2ViPy5zb21lKHIgPT4gd2l0aG91dFF1ZXJ5Lm1hdGNoKHIpKSlcbiAgICAgIHJldHVybiAnd2ViJ1xuICAgIGlmICh0aGlzLm9wdGlvbnMudHJhbnNmb3JtTW9kZT8uc3NyPy5zb21lKHIgPT4gd2l0aG91dFF1ZXJ5Lm1hdGNoKHIpKSlcbiAgICAgIHJldHVybiAnc3NyJ1xuXG4gICAgaWYgKHdpdGhvdXRRdWVyeS5tYXRjaCgvXFwuKFtjbV0/W2p0XXN4P3xqc29uKSQvKSlcbiAgICAgIHJldHVybiAnc3NyJ1xuICAgIHJldHVybiAnd2ViJ1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBfZmV0Y2hNb2R1bGUoaWQ6IHN0cmluZyk6IFByb21pc2U8RmV0Y2hSZXN1bHQ+IHtcbiAgICBsZXQgcmVzdWx0OiBGZXRjaFJlc3VsdFxuXG4gICAgY29uc3QgZmlsZVBhdGggPSB0b0ZpbGVQYXRoKGlkLCB0aGlzLnNlcnZlci5jb25maWcucm9vdClcblxuICAgIGNvbnN0IG1vZHVsZSA9IHRoaXMuc2VydmVyLm1vZHVsZUdyYXBoLmdldE1vZHVsZUJ5SWQoaWQpXG4gICAgY29uc3QgdGltZXN0YW1wID0gbW9kdWxlPy5sYXN0SE1SVGltZXN0YW1wIHx8IFJlYWxEYXRlLm5vdygpXG4gICAgY29uc3QgY2FjaGUgPSB0aGlzLmZldGNoQ2FjaGUuZ2V0KGZpbGVQYXRoKVxuICAgIGlmICh0aW1lc3RhbXAgJiYgY2FjaGUgJiYgY2FjaGUudGltZXN0YW1wID49IHRpbWVzdGFtcClcbiAgICAgIHJldHVybiBjYWNoZS5yZXN1bHRcblxuICAgIGNvbnN0IGV4dGVybmFsaXplID0gYXdhaXQgdGhpcy5zaG91bGRFeHRlcm5hbGl6ZShmaWxlUGF0aClcbiAgICBpZiAoZXh0ZXJuYWxpemUpIHtcbiAgICAgIHJlc3VsdCA9IHsgZXh0ZXJuYWxpemUgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNvbnN0IHIgPSBhd2FpdCB0aGlzLl90cmFuc2Zvcm1SZXF1ZXN0KGlkKVxuICAgICAgcmVzdWx0ID0geyBjb2RlOiByPy5jb2RlLCBtYXA6IHI/Lm1hcCBhcyB1bmtub3duIGFzIFJhd1NvdXJjZU1hcCB9XG4gICAgfVxuXG4gICAgdGhpcy5mZXRjaENhY2hlLnNldChmaWxlUGF0aCwge1xuICAgICAgdGltZXN0YW1wLFxuICAgICAgcmVzdWx0LFxuICAgIH0pXG5cbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIF90cmFuc2Zvcm1SZXF1ZXN0KGlkOiBzdHJpbmcpIHtcbiAgICBsZXQgcmVzdWx0OiBUcmFuc2Zvcm1SZXN1bHQgfCBudWxsID0gbnVsbFxuXG4gICAgaWYgKHRoaXMuZ2V0VHJhbnNmb3JtTW9kZShpZCkgPT09ICd3ZWInKSB7XG4gICAgICAvLyBmb3IgY29tcG9uZW50cyBsaWtlIFZ1ZSwgd2Ugd2FudCB0byB1c2UgdGhlIGNsaWVudCBzaWRlXG4gICAgICAvLyBwbHVnaW5zIGJ1dCB0aGVuIGNvbnZlcnQgdGhlIGNvZGUgdG8gYmUgY29uc3VtZWQgYnkgdGhlIHNlcnZlclxuICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5zZXJ2ZXIudHJhbnNmb3JtUmVxdWVzdChpZClcbiAgICAgIGlmIChyZXN1bHQpXG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuc2VydmVyLnNzclRyYW5zZm9ybShyZXN1bHQuY29kZSwgcmVzdWx0Lm1hcCwgaWQpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5zZXJ2ZXIudHJhbnNmb3JtUmVxdWVzdChpZCwgeyBzc3I6IHRydWUgfSlcbiAgICB9XG5cbiAgICBjb25zdCBzb3VyY2VtYXAgPSB0aGlzLm9wdGlvbnMuc291cmNlbWFwID8/ICdpbmxpbmUnXG4gICAgaWYgKHNvdXJjZW1hcCA9PT0gJ2lubGluZScgJiYgcmVzdWx0ICYmICFpZC5pbmNsdWRlcygnbm9kZV9tb2R1bGVzJykpXG4gICAgICB3aXRoSW5saW5lU291cmNlbWFwKHJlc3VsdClcblxuICAgIHJldHVybiByZXN1bHRcbiAgfVxufVxuIl0sIm5hbWVzIjpbImV4aXN0c1N5bmMiLCJpc05vZGVCdWlsdGluIiwiaXNWYWxpZE5vZGVJbXBvcnQiLCJzbGFzaCIsImpvaW4iLCJ0b0ZpbGVQYXRoIiwid2l0aElubGluZVNvdXJjZW1hcCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUtBLE1BQU0sVUFBYSxHQUFBLG9EQUFBLENBQUE7QUFDbkIsTUFBTSxhQUFnQixHQUFBLGtCQUFBLENBQUE7QUFFdEIsTUFBTSxhQUFnQixHQUFBO0FBQUEsRUFDcEIsVUFBQTtBQUFBLEVBQ0EsT0FBQTtBQUFBLEVBQ0EsVUFBQTtBQUFBLEVBQ0EsYUFBQTtBQUNGLENBQUEsQ0FBQTtBQUVBLE1BQU0sWUFBZSxHQUFBO0FB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
